server:
  # 网关服务端口
  port: 8080

spring:
  application:
    # 当前应用名称（注册到 Nacos 的服务名）
    name: gateway
  config:
    # 引入公共配置（Redis、Nacos 等）
    import:
      - classpath:cache.yml
      - classpath:config.yml
  cloud:
    nacos:
      discovery:
        server-addr: 192.168.147.102:8848
    gateway:
      # 路由配置
      routes:
        # 认证服务路由
        - id: auth-service
          uri: lb://auth
          predicates:
            - Path=/auth/**
          filters:
            - StripPrefix=0
        # 业务服务路由
        - id: business-user-service
          uri: lb://business-user
          predicates:
            - Path=/business-user/**
          filters:
            - StripPrefix=0
      # 全局跨域配置
      globalcors:
        cors-configurations:
          '[/**]':
            allowed-origins: "*"
            allowed-methods: "*"
            allowed-headers: "*"
            allow-credentials: true
      # 服务发现配置
      discovery:
        locator:
          enabled: true
          lower-case-service-id: true

# 网关鉴权配置
gateway:
  auth:
    # 是否启用鉴权
    enabled: true
    # Token在请求头中的名称
    token-name: Authorization
    # Token前缀（如：Bearer，如果不需要前缀则留空）
    token-prefix: ""
    # 白名单路径（不需要鉴权的路径）
    white-list:
      - /auth/login
      - /auth/register
      - /auth/forget-password
      - /actuator/**

# Sa-Token 配置
sa-token:
  # token 名称（同时也是 cookie 名称）
  token-name: satoken
  # token 有效期（单位：秒），默认30天
  timeout: 2592000
  # token 临时有效期（指定时间内无操作就视为 token 过期，单位：秒）
  activity-timeout: -1
  # 是否允许同一账号并发登录（为 true 时允许一起在线，为 false 时新登录挤掉旧登录）
  is-concurrent: true
  # 在多人登录同一账号时，是否共用一个 token（为 true 时所有登录共用一个 token，为 false 时每次登录新建一个 token）
  is-share: true
  # token 风格（默认可取值：uuid、simple-uuid、random-32、random-64、random-128、tik）
  token-style: uuid
  # 是否输出操作日志
  is-log: false